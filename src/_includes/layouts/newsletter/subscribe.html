{% extends 'layouts/base.html' %}

{% block content %}
    {{ content | safe }}
    <input type="text" id="email" name="email"/>
    <button type="button" onclick="submit()">submit</button>
    <p id="info"></p>
{% endblock %}

{% block javascript %}
    <script>
        async function submit() {
            let email = document.getElementById("email").value;
            let res = await fetch("/api/newsletter/subscribe", {
            method: 'POST',
            headers: {
                'Content-Type': 'text/plain'
            },
            body: email
            });
            text = await res.text();

            document.getElementById("info").innerHTML = text; 
        }
    </script>
{% endblock %}